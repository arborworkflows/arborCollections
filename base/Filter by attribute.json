{
    "inputs": [
        {
            "format": "rows",
            "name": "inputTable",
            "type": "table"
        },
        {
            "default": "[object Object]",
            "domain": [
                "GreaterThan",
                "LessThan",
                "EqualTo",
                "NotEqualTo"
            ],
            "format": "text",
            "name": "operation",
            "type": "string"
        },
        {
            "default": {
                "data": "'awesomeness'",
                "format": "text"
            },
            "domain": {
                "format": "column.names",
                "input": "inputTable"
            },
            "format": "text",
            "name": "columnname",
            "type": "string"
        },
        {
            "format": "text",
            "name": "testvalue",
            "type": "string"
        }
    ],
    "mode": "python",
    "name": "Filter by attribute",
    "outputs": [
        {
            "format": "rows",
            "name": "outTable",
            "type": "table"
        }
    ],
    "script": "\n# input: inputTable - a list of rows (2D table)\n# input: operation = string: \"GreaterThan\",\"LessThan\",\"NotEqual\", \"Equal\", \"EqualTo\"\n# input: columnname = string name of columnname\n# input: testvalue - value used to compare the entry in the selected column with\n# output: outTable\n\n# find all rows in this input  that match the test criteria.\noutTable = {}\n\n# this might be a number or it might be a character string, so check\ndef is_number(s):\n    try:\n        float(s)\n        return True\n    except ValueError:\n        return False\n        \n# prepare for the output table format of table:rows        \ncolumnHeaders = inputTable['fields']\noutColumns = []\nif is_number(testvalue):\n    testnumber = float(testvalue)\n    for i in range(len(inputTable['rows'])):\n        row = inputTable['rows'][i]\n        if operation == \"GreaterThan\":\n            if row[columnname] > testnumber:\n                outColumns.append(row)\n        if operation == \"LessThan\":\n            if row[columnname] < testnumber:\n                outColumns.append(row)\n        if operation == \"NotEqual\":\n            if row[columnname] != testnumber:\n                outColumns.append(row)\n        if (operation == \"EqualTo\"):\n            if row[columnname] == testnumber:\n                outColumns.append(row)\nelse:\n    for i in range(len(inputTable['rows'])):\n        row = inputTable['rows'][i]\n        if operation == \"GreaterThan\":\n            if row[columnname] > testvalue:\n                outColumns.append(row)\n        if operation == \"LessThan\":\n            if row[columnname] < testvalue:\n                outColumns.append(row)\n        if operation == \"NotEqual\":\n            if row[columnname] != testvalue:\n                outColumns.append(row)\n        if (operation == \"EqualTo\"):\n            if row[columnname] == testvalue:\n                outColumns.append(row)\n\noutTable = {'fields': columnHeaders, 'rows': outColumns}\n\n"
}