<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <title>Discrete ancestral character states &#8211; Arbor</title>
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta name="description" content="How to reconstruct discrete ancestral character states on nodes in your tree using Arbor">
    <meta name="author" content="Luke Harmon">
    <meta name="keywords" content="">
    <link rel="canonical" href="http://lukejharmon.github.io/arborCollections/arborCollections/2015/06/10/reconstructing-ancestral-characters-discrete/">

    <!-- Custom CSS -->
    <link rel="stylesheet" href="/arborCollections/css/pixyll.css" type="text/css">

    <!-- Fonts -->
    <link href='//fonts.googleapis.com/css?family=Merriweather:900,900italic,300,300italic' rel='stylesheet' type='text/css'>
    <link href='//fonts.googleapis.com/css?family=Lato:900,300' rel='stylesheet' type='text/css'>
    


    <!-- Open Graph -->
    <!-- From: https://github.com/mmistakes/hpstr-jekyll-theme/blob/master/_includes/head.html -->
    <meta property="og:locale" content="en_US">
    <meta property="og:type" content="article">
    <meta property="og:title" content="Discrete ancestral character states">
    <meta property="og:description" content="">
    <meta property="og:url" content="http://lukejharmon.github.io/arborCollections/2015/06/10/reconstructing-ancestral-characters-discrete/">
    <meta property="og:site_name" content="Arbor">

    <!-- Icons -->
    <link rel="apple-touch-icon" sizes="57x57" href="/apple-touch-icon-57x57.png">
    <link rel="apple-touch-icon" sizes="114x114" href="/apple-touch-icon-114x114.png">
    <link rel="apple-touch-icon" sizes="72x72" href="/apple-touch-icon-72x72.png">
    <link rel="apple-touch-icon" sizes="144x144" href="/apple-touch-icon-144x144.png">
    <link rel="apple-touch-icon" sizes="60x60" href="/apple-touch-icon-60x60.png">
    <link rel="apple-touch-icon" sizes="120x120" href="/apple-touch-icon-120x120.png">
    <link rel="apple-touch-icon" sizes="76x76" href="/apple-touch-icon-76x76.png">
    <link rel="apple-touch-icon" sizes="152x152" href="/apple-touch-icon-152x152.png">
    <link rel="apple-touch-icon" sizes="180x180" href="/apple-touch-icon-180x180.png">
    <link rel="icon" type="image/png" href="/favicon-192x192.png" sizes="192x192">
    <link rel="icon" type="image/png" href="/favicon-160x160.png" sizes="160x160">
    <link rel="icon" type="image/png" href="/favicon-96x96.png" sizes="96x96">
    <link rel="icon" type="image/png" href="/favicon-16x16.png" sizes="16x16">
    <link rel="icon" type="image/png" href="/favicon-32x32.png" sizes="32x32">

    <link rel="stylesheet" href="//maxcdn.bootstrapcdn.com/font-awesome/4.3.0/css/font-awesome.min.css">


    
    <script type="text/javascript">
      var _gaq = _gaq || [];
      _gaq.push(['_setAccount', 'UA-63774905-2']);
      _gaq.push(['_trackPageview']);
      (function() {
        var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
        ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
        var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
      })();
    </script>
    
</head>

<body class="">
  <div class="site-wrap">
    <header class="site-header px2 px-responsive">
  <div class="mt2 wrap">
    <div class="measure">
      <a href="http://lukejharmon.github.io/arborCollections" class="site-title">Arbor</a>
      <nav class="site-nav right">
        <a href="/arborCollections/about/">About</a>
<a href="/arborCollections/contact/">Contact</a>

      </nav>
      <div class="clearfix"></div>
      
      <br><br>
      <img src="/arborCollections/images/arbor_in_real_life.jpg" width="100%">

    </div>
  </div>
</header>


    <div class="post p2 p-responsive wrap" role="main">
      <div class="measure">
        


<div class="post-header mb2">
  <h1>Discrete ancestral character states</h1>
  <span class="post-meta">Jun 10, 2015</span><br>
  
  <span class="post-meta small">3 minute read</span>
</div>

<article class="post-content">
  <h2 id="overview">Overview</h2>

<p>In this exercise, we will learn how to reconstruct ancestral character states in Arbor for a discrete character - that is, a character that can take on one of a number of discrete values. Examples might be lizards, &ldquo;legs&rdquo; versus &ldquo;no legs&rdquo; - this would be a two-state discrete character. Another example would be animal locomotion - &ldquo;walks,&rdquo; &ldquo;swims,&rdquo; or &ldquo;flies.&rdquo; This is an example of a three-state discrete character.</p>

<p>Imagine that you have a phylogenetic tree with information on some discrete character for some or all of the tips. You want to use mathematical methods to reconstruct the ancestral character states on the internal nodes of the tree. Then, this is the exercise for you!</p>

<h2 id="loading-example-data">Loading example data</h2>

<p>You will need the anolis example data files, anolis.phy and anolis.csv, from <a href="/arborCollections/docs_datasets/">Arbor datasets</a>. Save those files somewhere on your computer.</p>

<p>Now open the <a href="https://arbor.kitware.com">Arbor web app</a>. Drag and drop the two anolis data files on the blue &ldquo;Browse or drop files&rdquo; box to load them into your browser.</p>

<p>Finally, <a href="/arborCollections/2015/06/09/creating-a-new-collection/">log in and create a personal collection</a>.</p>

<h2 id="selecting-the-collections-that-you-need">Selecting the collections that you need</h2>

<p>For this example, everything required is in the &ldquo;phylogeny&rdquo; collection - so click on that eyeball and you will be able to access the functions that you need.</p>

<p>At this point, you should have the two anolis datafiles stored in Arbor and the &ldquo;phylogeny&rdquo; collection available. You should be logged in and have write access to your own private collection.</p>

<h2 id="set-up-your-workflow">Set up your workflow</h2>

<p>The main function in Arbor for ancestral state reconstruction is aceAcbor in the &ldquo;phylogeny&rdquo; collection. Select that function now. You can view the source code for it by choosing &ldquo;show script&rdquo; (it is in R).</p>

<p><img src="/arborCollections/assets/discreteACE/screen1.png" alt="Screenshot"></p>

<p>You will need to use this function in a workflow to calculate ancestral states and return the output. To start, create a new workflow called &ldquo;DiscreteAncestralStatesWorkflow&rdquo;. Make sure to choose &ldquo;New workflow&rdquo; and not &ldquo;New analysis&rdquo;!</p>

<p><img src="/arborCollections/assets/discreteACE/screen2.png" alt="Screenshot"></p>

<p>Now create the connections you need to make the workflow run. First, click the &ldquo;edit&rdquo; button to start working on the workflow.</p>

<p>Now add the aceArbor function by selecting it under &ldquo;Select analysis.&rdquo; When you click &ldquo;Add to workflow&rdquo; then the function shoud appear in your workspace.</p>

<p><img src="/arborCollections/assets/discreteACE/screen3.png" alt="Screenshot"></p>

<p>Now create the inputs and outputs of the function by clicking on the &ldquo;spokes&rdquo; coming out of aceArbor. You should also move the blocks around to make your workflow look nice.</p>

<p><img src="/arborCollections/assets/discreteACE/functionPopup.gif" alt="Screenshot"></p>

<p>Final result:</p>

<p><img src="/arborCollections/assets/discreteACE/screen4.png" alt="Screenshot"></p>

<p><strong>Once you have a workflow that looks the way you want, click save!</strong> If you do not do this you will be running the workflow at the last point it was saved and not what is shown on the screen.</p>

<h2 id="run-your-workflow">Run your workflow</h2>

<p>Click &ldquo;Setup and run&rdquo; to run your workflow. Select these options:</p>

<p><img src="/arborCollections/assets/discreteACE/screen5.png" alt="Screenshot"></p>

<p>If your analysis worked, you should see the following message:</p>

<p><img src="/arborCollections/assets/discreteACE/screen6.png" alt="Screenshot"></p>

<h2 id="see-your-results">See your results</h2>

<p>Now move over to the &ldquo;visualization&rdquo; tab to see your results. First, select &ldquo;image&rdquo; under &ldquo;Select visualization&rdquo;, and choose your tree plot under &ldquo;data&rdquo; (it should be called DiscreteAncestralStatesWorkflow treePlot). Click &ldquo;update&rdquo; to see this result:</p>

<p><img src="/arborCollections/assets/discreteACE/screen7.png" alt="Screenshot"></p>

<p>To see the results in table format, choose &ldquo;table&rdquo; and &ldquo;DiscreteAncestralStatesWorkflow res&rdquo;. Update gives you this table, which is presently useless. Sorry!</p>

<p><img src="/arborCollections/assets/discreteACE/screen8.png" alt="Screenshot"></p>

</article>









      </div>
    </div>
  </div>

  <footer class="footer">
  <div class="p2 wrap">
    <div class="measure mt1 center">
      <small>
        By the Arbor team.<br>
        Jekyll pixyll theme by <a href="http://johnotander.com">John Otander</a>.
      </small>
    </div>
  </div>
</footer>

</body>
</html>
